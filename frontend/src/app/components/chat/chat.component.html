<div class="container mt-4">
  <h4 class="mb-3 text-danger">Chat with other Inkspire users</h4>

  <div class="row">
    <!-- Sidebar with users -->
    <div class="col-md-4 border-end">
      <h6 class="text-primary">All Users</h6>
      <ul class="list-group">
        <li *ngFor="let user of allUsers"
            (click)="setReceiver(user)"
            class="list-group-item list-group-item-action"
            [class.active]="selectedUser?._id === user._id">
          {{ user.username }}
        </li>
      </ul>
    </div>

    <!-- Chat Window -->
    <div class="col-md-8">
      <div *ngIf="selectedUser">
        <h5 class="text-success">Chatting with {{ selectedUser.username }}</h5>

        <div class="chat-box border p-3 mb-3 bg-light"
             style="height: 300px; overflow-y: auto;">
          <div *ngFor="let msg of messages" class="mb-2">
            <strong>{{ msg.sender }}:</strong> {{ msg.message }}
          </div>
        </div>

        <div class="input-group">
          <input type="text"
                 [(ngModel)]="message"
                 (keyup.enter)="sendMessage()"
                 class="form-control"
                 placeholder="Type a message..." />
          <button class="btn btn-primary" (click)="sendMessage()">Send</button>
        </div>
      </div>

      <div *ngIf="!selectedUser" class="text-muted text-center mt-4">
        <p>Select a user to start chatting</p>
      </div>
    </div>
  </div>
</div>
